<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.9.0 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Java 9 Collection Literals  MXK Software Craftmanship</title>
<meta name="description" content="An outline of some of the Java 9 changes to Collection literals and other areas of the core API.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_gb">
<meta property="og:site_name" content="MXK Software Craftmanship">
<meta property="og:title" content="Java 9 Collection Literals">
<meta property="og:url" content="https://m-x-k.github.io/java/Java-9-Collection-Literals/">


  <meta property="og:description" content="An outline of some of the Java 9 changes to Collection literals and other areas of the core API.">







  <meta property="article:published_time" content="2017-12-30T11:40:00+00:00">






<link rel="canonical" href="https://m-x-k.github.io/java/Java-9-Collection-Literals/">













<!-- end _includes/seo.html -->


<link href="https://m-x-k.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="MXK Software Craftmanship Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://m-x-k.github.io/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="https://m-x-k.github.io/">MXK Software Craftmanship</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item">
              <a href="https://m-x-k.github.io//recent-posts/" >Recent Posts</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://m-x-k.github.io//year-archive/" >Posts</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://m-x-k.github.io//categories/" >Categories</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://m-x-k.github.io//tags/" >Tags</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://m-x-k.github.io//about/" >About</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="http://mxk.solutions" >External Link</a>
            </li>
          
        </ul>
        
        <button class="search__toggle" type="button">
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <div class="initial-content">
      <link rel="stylesheet" href="/assets/css/custom.css">




  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="http://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="https://m-x-k.github.io//" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="https://m-x-k.github.io/categories/java" itemprop="item"><span itemprop="name">Java</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Java 9 Collection Literals</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  

  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Java 9 Collection Literals">
    <meta itemprop="description" content="An outline of some of the Java 9 changes to Collection literals and other areas of the core API.">
    <meta itemprop="datePublished" content="December 30, 2017">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Java 9 Collection Literals
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>An outline of some of the Java 9 changes to Collection literals and other areas of the core API.</p>

<h2 id="listof-and-setof">List.of and Set.of</h2>

<p>Example:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">digits</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>

<span class="n">Set</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">digits</span> <span class="o">=</span> <span class="n">Set</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">31</span><span class="o">,</span> <span class="mi">127</span><span class="o">,</span> <span class="mi">8191</span><span class="o">,</span> <span class="mi">131871</span><span class="o">);</span>
</code></pre></div></div>

<h3 id="points-to-note">Points to note:</h3>

<h4 id="similarities-to-java-8-streams">Similarities to Java 8 Streams</h4>
<blockquote>

  <p>We already came across the <code class="highlighter-rouge">of</code> function in Java 8 when we seen <code class="highlighter-rouge">Stream.of</code>.</p>
</blockquote>

<h4 id="null-not-supported">Null not supported</h4>
<blockquote>

  <p>Itâ€™s also not allowed to insert a null value into the <code class="highlighter-rouge">of</code> function as this is the preferred coding-style these days.</p>
</blockquote>

<h4 id="immutable-object-returned">Immutable object returned</h4>
<blockquote>

  <p>It should also be noted here that while similar to <code class="highlighter-rouge">Arrays.asList</code> the objects returned by the <code class="highlighter-rouge">of</code> functions here are <code class="highlighter-rouge">immutable</code>. As a result if you try to <code class="highlighter-rouge">sort</code> or modify the collection you will get an <code class="highlighter-rouge">java.lang.UnsupportedOperationException</code>.</p>
</blockquote>

<hr />

<h2 id="mapof">Map.of</h2>

<p>The new <code class="highlighter-rouge">Map.of</code> function is follows the api structure <code class="highlighter-rouge">static &lt;E&gt; List&lt;E&gt; of(E... elements)</code>.</p>

<p>The syntax for using the new <code class="highlighter-rouge">Map.of</code> function is as follows:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">jshell</span><span class="o">&gt;</span> <span class="n">Map</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"Jan"</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="s">"Feb"</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="s">"March"</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>
<span class="err">$</span><span class="mi">1</span> <span class="o">==&gt;</span> <span class="o">{</span><span class="n">Feb</span><span class="o">=</span><span class="mi">2</span><span class="o">,</span> <span class="n">March</span><span class="o">=</span><span class="mi">3</span><span class="o">,</span> <span class="n">Jan</span><span class="o">=</span><span class="mi">1</span><span class="o">}</span>
</code></pre></div></div>

<h3 id="points-to-note-1">Points to note:</h3>

<h4 id="varags-syntax-instead-of-mapk-v">Varags syntax instead of Map&lt;K, V&gt;</h4>
<blockquote>

  <p>Since the type of <code class="highlighter-rouge">Key</code> or <code class="highlighter-rouge">Value</code> can change we need to use a flat varags structure to represent the data. This can seem odd when looking at data that is difficult to separate such as: <code class="highlighter-rouge">Map.of(1,1,2,2,3,3)</code>.</p>
</blockquote>

<h4 id="null-not-supported-1">Null not supported</h4>
<blockquote>

  <p>Again <code class="highlighter-rouge">null</code> is not supported here.</p>
</blockquote>

<h4 id="maximum-of-11-entries">Maximum of 11 entries</h4>
<blockquote>

  <p>Over 11 entries will produce an error. To get around this you will need to use <code class="highlighter-rouge">Map.ofEntries(Map.Entry ...)</code></p>
</blockquote>

<hr />

<h2 id="optional"><a href="https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html">Optional</a></h2>

<p>Java 8 introduced the concept of Optional as an operator to help prevent constantly checking for nulls. With Java 9 we now see more enhanced Optional support in the form of:</p>
<ul>
  <li>New API methods yielding optional values:
    <ul>
      <li><code class="highlighter-rouge">HttpClient.authenticator/cookieManager/proxy/sslParameters</code></li>
      <li><code class="highlighter-rouge">ServiceLoader.findFirst()</code></li>
      <li><code class="highlighter-rouge">Runtime.version().build/pre/post</code></li>
      <li><code class="highlighter-rouge">ProcessHandle.of</code></li>
      <li><code class="highlighter-rouge">ProcessHandle.Info.command/commandLine/arguments/startInstant/totalCpuDuration/user</code></li>
    </ul>
  </li>
  <li>New <code class="highlighter-rouge">Optional.or()</code> method:
    <ul>
      <li>If a value is present, returns an Optional describing the value, otherwise returns an Optional produced by the supplying function.</li>
      <li><code class="highlighter-rouge">Optional&lt;T&gt; or(Suppplier&lt;? extends Optional&lt;? extends T&gt;&gt; supplier)</code></li>
      <li>Example:
<script src="https://gist.github.com/f646aea565927c81dbdd953c42ea6258.js"> </script></li>
    </ul>
  </li>
  <li>New <code class="highlighter-rouge">Optional.stream()</code> method
    <ul>
      <li>Yields a stream of length 0 or 1</li>
      <li>Can be useful in place of a stream filter to drop empty results</li>
      <li>Example: <code class="highlighter-rouge">Stream&lt;User&gt; users = people.map(Person::name).flatMap(Optional::stream)</code></li>
    </ul>
  </li>
</ul>

<p>As a result of the above inclusions it is more common now to see code that no longer requires null checks all over the place. The idea here is to assist development teams to create and maintain cleaner code bases but as a result it is necessary to understand the core Java API better. Making better use of functional programming techniques like Java Streams will help to make the above API changes easier to use in the long run.</p>

<hr />

<h3 id="summary">Summary</h3>

<p>As you can see Java 9 has introduced some useful new functions but in many cases they appear to come with them a number of technical intricacies.</p>

<p>While the above features do provide syntactical sugar we can only hope that in time they will improve. Perhaps they will begin to serve a foundation for future changes to the core Java language but only time will tell. For the time being they remain useful when programming in a reactive style.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://m-x-k.github.io/tags/java" class="page__taxonomy-item" rel="tag">Java</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://m-x-k.github.io/categories/java" class="page__taxonomy-item" rel="tag">Java</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2017-12-30T11:40:00+00:00">December 30, 2017</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="https://m-x-k.github.io/java/Java-9-JShell-Overview/" class="pagination--pager" title="Java 9 JShell overview
">Previous</a>
    
    
      <a href="https://m-x-k.github.io/aws/AWS-Application-Services-Tutorial/" class="pagination--pager" title="AWS App Services and Dev Tools Overview
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap">
  <input type="text" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  <div id="results" class="results"></div>
</div>
      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
    
    
    
      <li><a href="https://github.com/m-x-k"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    
    <li><a href="https://m-x-k.github.io/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 MXK Software Craftmanship. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="https://m-x-k.github.io/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.2/js/all.js"></script>



  
  
  <script src="https://m-x-k.github.io/assets/js/lunr/lunr.min.js"></script>
  <script src="https://m-x-k.github.io/assets/js/lunr/lunr-store.js"></script>
  <script src="https://m-x-k.github.io/assets/js/lunr/lunr-en.js"></script>


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-111584934-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-111584934-1');
</script>




  </body>
</html>